loglevel.default = "<%= @rd_loglevel %>"
rdeck.base = "<%= @rdeck_base %>"
rss.enabled = "<%= @rss_enabled %>"

rundeck.security.useHMacRequestTokens = <%= @security_config['useHMacRequestTokens'] %>
rundeck.security.apiCookieAccess.enabled = <%= @security_config['apiCookieAccess'] %>

<%- if @database_config['type'] == 'mysql' -%>
rundeck.projectsStorageType=db
<%- end -%>

dataSource {
  dbCreate = "<%= @database_config['dbCreate'] %>"
  url = "<%= @database_config['url'] %>"
  <%- if @database_config['type'] != 'h2' -%>
  driverClassName = "<%= @database_config['driverClassName'] %>"
  username = "<%= @database_config['username'] %>"
  password = "<%= @database_config['password'] %>"
  <%- if @database_config['type'] != 'mysql' -%>
  dialect = "<%= @database_config['dialect'] %>"
  <%- end -%>
  <%- end -%>
}

<%- if !@mail_config.empty? %>
grails {
  mail {
    host = "<%= @mail_config['host'] %>"
    username = "<%= @mail_config['username'] %>"
    port = <%= @mail_config['port'] %>
    password = "<%= @mail_config['password'] %>"
    props = [<% @mail_config['props'].each do |k,v| -%>"<%= k %>":"<%= v %>",<% end %>]
  }
}
<%- end -%>
<%- if @mail_config['defaults.from'] -%>
grails.mail.default.from = "<%= @mail_config['defaults.from'] %>"
<%- end -%>
grails.serverURL = "<%= @grails_server_url %>"
rundeck.clusterMode.enabled = "<%= @clustermode_enabled %>"

<%- if @quartz_threadCount -%>
quartz.props.threadPool.threadCount = <%= @quartz_threadCount %>
<%- end -%>

<%- if @file_keystorage_dir %>
rundeck.storage.provider."1".config.baseDir = "<%= @file_keystorage_dir %>"
rundeck.storage.provider."1".path = "/"
rundeck.storage.provider."1".type = "file"
<%- end -%>
